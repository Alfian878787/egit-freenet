<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content="HTML Tidy for Linux/x86 (vers 7 December 2008), see www.w3.org">
  <style type="text/css">
pre{margin:1em;font-size:90%;background-color:#f8f8ff;border:1px solid #dedede;padding:.5em;line-height:1.5em;color:#444;overflow:auto;}
  pre code{padding:0;font-size:100%;background-color:#f8f8ff;border:none;}
  code{font-size:90%;background-color:#f8f8ff;color:#444;padding:0 .2em;border:1px solid #dedede;}
  </style>

  <title>Git Over Freenet</title>
</head>

<body>
  <h1><img src="activelink.png" align="left">Git Over Freenet</h1>

  <h1>Git Over Freenet</h1>

  <p>The code need some more cleanups, so it is not ready for apply (yet). It will be rebased / reorganized from time to time, until it is merged upstream.</p>

  <h2>0. Download</h2>You may download the shell-archive executable (as generated by <code>make_jgit.sh</code>) <a href="jgit">here</a> . This is a JAR file, prepadded with a shell script. After <code>chmod 755 jgit</code>, it should be usable in any linux system with java installed.

  <p>The full source is only aviliable on <a href="http://github.com/j16sdiz/egit-freenet/zipball/master">github</a> , or in the git repository. See page footer for the repository address.</p>

  <h2>1. Usage Example</h2>

  <h3>1.1 Push (using jgit)</h3>
  <pre>
$ echo "publicKey=USK@VoFcfs8Y3VQfwD66ZgXAb4HBiS~WJe8w9mOy2hS9Mh8,OS6~bhX8LHxMLw-sruBkWDeACo-fg4yBZqueMPVj1Uc,AQACAAE/"  &gt; .git/egit-freenet
$ echo "privateKey=USK@.........,AQECAAE/"  &gt;&gt; .git/egit-freenet
$ git remote add fcp freenet://egit-freenet/egit-freenet.git/0/
$ ./jgit push fcp master
</pre>

  <h3>1.2 Push (using jSite, for "seeding" only)</h3>

  <ol>
    <li>Create a bare repository for your code</li>

    <li><code>git update-server-info</code></li>

    <li>Use jSite to upload your repositoty to <code>USK@[.....]/egit-freenet.git/0/</code></li>
  </ol>

  <h3>1.3 Cloning</h3>
  <pre>
$ ./jgit clone freenet://USK@VoFcfs8Y3VQfwD66ZgXAb4HBiS~WJe8w9mOy2hS9Mh8,OS6~bhX8LHxMLw-sruBkWDeACo-fg4yBZqueMPVj1Uc,AQACAAE/egit-freenet.git/6/
</pre>OR
  <pre>
$ echo "publicKey=USK@VoFcfs8Y3VQfwD66ZgXAb4HBiS~WJe8w9mOy2hS9Mh8,OS6~bhX8LHxMLw-sruBkWDeACo-fg4yBZqueMPVj1Uc,AQACAAE/" &gt; ~/egit-freenet
$ ./jgit clone freenet://egit-freenet/test.git
</pre>

  <h3>1.3 Fetching</h3>
  <pre>
$ echo "publicKey=USK@VoFcfs8Y3VQfwD66ZgXAb4HBiS~WJe8w9mOy2hS9Mh8,OS6~bhX8LHxMLw-sruBkWDeACo-fg4yBZqueMPVj1Uc,AQACAAE/" &gt; .git/egit-freenet<br>$ git remote add fcp freenet://egit-freenet/egit-freenet.git/0/
$ ./jgit push fcp master:master
</pre>

  <h3>1.4 Other</h3>Fetching from fproxy using git should also work, but it is not tested. Try this:
<pre>git clone 'http://localhost:8888/?type=text/plain&amp;max-size=2147483647&amp;key=USK@VoFcfs8Y3VQfwD66ZgXAb4HBiS~WJe8w9mOy2hS9Mh8,OS6~bhX8LHxMLw-sruBkWDeACo-fg4yBZqueMPVj1Uc,AQACAAE/egit-freenet.git/6/' egit-freenet</pre>

<strong> NOT WORKING !! </strong> This does not work due to a bug in jgit, see <a href="http://thread.gmane.org/gmane.comp.version-control.git/114397">http://thread.gmane.org/gmane.comp.version-control.git/114397</a> for details. Reported upstream, hope to be fixed soon.
  <hr>

  <h2>2. Internals</h2>

  <h3>1.1 File List</h3>

  <p>To support updateing / re-inserting the git repository as archive, <code>egit-freenet</code> keep a file list (named <code>.JGIT-FREENET-FILELIST</code>) internatlly. The format is:</p>
  <pre>
# File List
^SSK@[...],AQACAAE/egit-freenet.git-5/                                                  <strong>(1)</strong>
objects/pack/pack-[...].idx     SSK@[..]/egit-freenet.git-7/objects/pack/pack-[...].idx   <strong>(2)</strong>
objects/pack/pack-[...].pack    CHK@[..],AAIA--8
info/refs       *
objects/info/packs      *                  <strong>(4)</strong>
refs/heads/master       *
</pre>

  <dl>
    <dt>(1) Base Archive</dt>

    <dd>
      <ul>
        <li>If the file requested is not in the file list, <code>egit-freenet</code> would try to fetch the file from the base archive. Successful fetchs would be added to the file list.</li>

        <li>If we try to update a repository with no file list, that repository would be added as the <tt>base archive</tt> automatically. Packs listed in <code>objects/info/packs</code> are added.</li>
      </ul>
    </dd>

    <dt>(2) File List</dt>

    <dd>
      <ul>
        <li>A list of know file and its key, seperated by <code>TAB</code>. <code>USK@</code> are always resolved to <code>SSK@</code>. Large files are inserted as <code>CHK@</code>s.</li>
      </ul>
    </dd>

    <dt>(3) Current Files</dt>

    <dd>
      <ul>
        <li>A <code>*</code> as the key indicate that file is new in this archive and have been inserted as a part of <code>SSK@</code>.</li>
      </ul>
    </dd>
  </dl>
  <hr>

  <h2>A. Contact Infomation</h2>

  <table border="0" style="font-size: small">
    <tr>
      <td nowrap>Website:</td>

      <td nowrap><a href="http://j16sdiz.github.com/egit-freenet/">http://j16sdiz.github.com/egit-freenet/</a></td>
    </tr>

    <tr>
      <td rowspan="2" nowrap>Git Repository:</td>

      <td nowrap>git://github.com/j16sdiz/egit-freenet.git</td>
    </tr>

    <tr>
      <td nowrap>freenet://USK@VoFcfs8Y3VQfwD66ZgXAb4HBiS~WJe8w9mOy2hS9Mh8,OS6~bhX8LHxMLw-sruBkWDeACo-fg4yBZqueMPVj1Uc,AQACAAE/egit-freenet.git/6/</td>
    </tr>

    <tr>
      <td nowrap>Freesite:</td>

      <td nowrap><a href="freenet:USK@VoFcfs8Y3VQfwD66ZgXAb4HBiS%7EWJe8w9mOy2hS9Mh8,OS6%7EbhX8LHxMLw-sruBkWDeACo-fg4yBZqueMPVj1Uc,AQACAAE/egit-freenet/-1/">freenet:USK@VoFcfs8Y3VQfwD66ZgXAb4HBiS~WJe8w9mOy2hS9Mh8,OS6~bhX8LHxMLw-sruBkWDeACo-fg4yBZqueMPVj1Uc,AQACAAE/egit-freenet/-1/</a></td>
    </tr>

    <tr>
      <td nowrap>PGP Key</td>

      <td nowrap><a href="0x7494252.asc">sec 1024D/75494252</a></td>
    </tr>

    <tr>
      <td nowrap>Freemail:</td>

      <td nowrap>sdiz@sdiz.freemail</td>
    </tr>
  </table>
</body>
</html>
